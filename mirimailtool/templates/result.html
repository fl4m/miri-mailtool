{% extends "default.html" %}

{% block content %}
    <div class="row">
        <div class="col">
        {% if stats.res.count %}
            <div class="alert alert-success">
                Es wurden <strong>{{ stats.res.count }} </strong> E-Mail Adressen
                gefunden.
            </div>
        {% else %}
            <div class="alert alert-warning">
                Es wurden keine E-Mail Adressen gefunden.
            </div>
        {% endif %}
        </div>
    </div>

    <div class="row">
        <div class="col">
            <table class="table table-bordered">
                <tr>
                    <th scope="row" class="table-active">Gesamt</th>
                    <td>{{stats.addrs.count}} Adressen, {{stats.addrs.dup}} Duplikate/Ung√ºltig</td>
                </tr>
                <tr>
                    <th scope="row" class="table-active">&rArr;</th>
                    <td>{{stats.res.count}} neue Adressen</td>
                </tr>
            </table>
        </div>
    </div>
    
    {% if addrs %}
        <div class="row">
            <div class="col">
                <div class="form-group">
                    <label for="ta-result">Neue E-Mail Adressen: &emsp;
                        <button class="btn btn-outline-primary btn-sm" onclick="copy(this)"
                         style="transition: 1s;">
                            Kopieren
                        </button></label>
                    <textarea class="form-control" id="ta-result" rows="5" readonly>{{
                        addrs | join('; ')
                    }}</textarea>
                </div>
            </div>
        </div>
    {% endif %}
    
    <div class="row justify-content-end">
        <div class="col-4">
            <a href="" class="btn btn-success btn-lg btn-block">Neue Anfrage</a>
        </div>
    </div>
    
    
    <script type="text/javascript">
        const copy = function(el){
            const ta = document.getElementById('ta-result');
            ta.select();
            document.execCommand('copy');
            ta.selectionStart = ta.selectionEnd;
            ta.blur();
            
            el.innerHTML = "&#x2713;&ensp;Kopiert";
            el.classList.remove('btn-outline-primary');
            el.classList.add('btn-outline-success');
            el.disabled=true;
        }
    </script>
{% endblock %}